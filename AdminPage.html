<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="practice1.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>MayuraSilks</title>
    <script>
        function showMyStock() {
            const stkList = JSON.parse(localStorage.getItem("stockList")) || []

            let tableRows = stkList.map(item => {
                return `
                    <tr>
                        <td>${item.name}</td>
                        <td>${item.price}</td>
                        <td>${item.total}</td>
                        <td class="${item.total === 0 ? 'text-danger' : ''}">${item.total > 0 ? 'In stock' : 'Out Of Stock'}</td>
                    </tr>
                `
            }).join('')
            const content = `
           
        <table class="table table-dark table-hover table-striped table-bordered mt-5 mb-5">
            <thead>
                <tr>
                    <th>Item Name</th>
                    <th>Price</th>
                    <th>No Of Stock</th>
                    <th>Available</th>
                </tr>
            </thead>

            <tbody>
               ${tableRows}
            </tbody>
        </table>`

            const stockDiv = document.getElementById('showMyStockContent')
            const adminImg = document.getElementById('adminImg')
            stockDiv.innerHTML = content
            stockDiv.classList.remove('d-none')
            adminImg.classList.add('d-none')
        }

        function showCustomerOrders() {
            let orders = JSON.parse(localStorage.getItem("orders")) || [];

            const OrderDiv = document.getElementById('showMyStockContent');
            const adminImg = document.getElementById('adminImg');
            adminImg.classList.add('d-none');
            OrderDiv.classList.remove('d-none');

            if (orders.length === 0) {
                stockDiv.innerHTML = "<p>No orders found.</p>";
                return;
            }

            let orderHTML = orders.map(itm => `
                <div class="card mb-3 p-3">
                    <div class="d-flex align-items-start">
                        <img src="${itm.src || ''}" alt="product" style="max-width:100px"/>
                    </div>
                    <div>
                        <h5>${itm.name || "Unnamed Item"}</h5>
                        <p>Order Date: ${itm.orderDate || "N/A"}</p>
                        <p>Deliver Date: ${itm.deliverDate || "N/A"}</p>


                        
                        <p><strong>Ordered By:</strong> ${itm.customerName || "Unknown"}</p>
                        <p><strong>Address:</strong> ${itm.customerAddress || "N/A"}</p>
                        <p><strong>Mobile:</strong> ${itm.customerMobile || "N/A"}</p>
                    </div>
                </div>
            `).join('');

            OrderDiv.innerHTML = orderHTML;
        }


        function AddStock() {
            const tableContent = `
            <div class='container border border-danger mb-5'>
                    <form onsubmit="AddData(event)">
                        <p class="fw-bold fs-4 text-center">Add Stock</p>
                        <div class="row mb-4">
                            <label for="stkName" class="form-label col-sm-3">Material Name:</label>
                            <div class="col-sm-6">
                                <input type="text" class="form-control" id="stkName" placeholder="Material Name"/>
                            </div>
                        </div>

                            <div class="row mb-4">
                                <label for="stkPrice" class="form-label col-sm-3">Material Price:</label>
                                <div class="col-sm-6">
                                    <input type="text" class="form-control" id="stkPrice" placeholder="Material Price"/>
                                </div>
                            </div>

                            <div class="row mb-4">
                                <label for="totalStk" class="form-label col-sm-3">Total Stock:</label>
                                <div class="col-sm-6">
                                    <input type="number" class="form-control" id="totalStk" placeholder="Total Stock"/>
                                </div>
                            </div>   

                             <div class="d-flex justify-content-center align-items-center mb-5 mt-4">
                                <button type="submit" class="btn btn-success rounded-pill w-25" >Add</button>
                            </div>   
                    </form>
            </div> 
            `

            const stockDiv = document.getElementById('showMyStockContent')
            const adminImg = document.getElementById('adminImg')
            stockDiv.innerHTML = tableContent
            stockDiv.classList.remove('d-none')
            adminImg.classList.add('d-none')
        }


        function AddData(event) {
            event.preventDefault()

            const stkName = document.getElementById('stkName').value
            const stkPrice = document.getElementById('stkPrice').value
            const totalStk = document.getElementById('totalStk').value

            const stkItem = {
                name: stkName,
                price: stkPrice,
                total: totalStk
            }

            let stkList = JSON.parse(localStorage.getItem("stockList")) || []

            stkList.push(stkItem)

            localStorage.setItem("stockList", JSON.stringify(stkList))

            alert("Stock added!")

            event.target.reset()
        }


        function backToLogin() {
            window.location.href = 'LandingPage.html'
        }
    </script>
</head>

<body>
    <div class="container-fluid name-header">
        <div class="container">
            <div class="row align-items-center text-center text-md-start">

                <div class="col-md-3 col-12 mb-2 d-flex flex-md-row flex-column justify-content-md-end">
                    <img src="https://www.pngplay.com/wp-content/uploads/12/Peacock-PNG-Pic-Background.png"
                        alt="Mayura Silks Logo" class="peacockLogo" />
                    <h1 class="text-success brand">MayuRa</h1>
                    <p class="text-danger subBrand">Silks</p>
                </div>

                <div class="col-md-4 col-12 mb-2">
                    <form action="">
                        <input type="search" class="form-control" id="Dsearch" placeholder="Search here!" />
                    </form>
                </div>
                <div
                    class=" col-md-5 col-12 insideNav d-flex flex-column flex-md-row justify-content-md-end align-items-center text-center gap-3">
                    <span onclick="AddStock()"><i class="fa-brands fa-facebook mx-1"></i>Add Stock</span>
                    <span onclick="showMyStock()"><i class="fa-solid fa-heart mx-1"></i>Stock Details</span>
                    <span onclick="showCustomerOrders()"><i class="fa-solid fa-cart-shopping"></i>Order Details</span>
                    <span onclick="backToLogin()"><i class="fa-solid fa-lock mx-1"></i> Logout</span>
                </div>
            </div>
        </div>
    </div>

    <div class="col-12" id="adminImg">
        <img src="https://houseofelegance.in/cdn/shop/collections/saree1-1900x850.jpg?v=1653132976" alt="adminImage"
            class="img-fluid" />
    </div>

    <div class="container d-none  mt-5" id="showMyStockContent" style="top: 15%; left: 10%;">

    </div>

</body>

</html>